---
description: フェーズ完了時の全成果物に対して品質保証・リグレッション・文書化・UXのペルソナでレビューを実行する
handoffs:
  - label: 次のフェーズ
    agent: poor-dev.implement
    prompt: フェーズ完了レビューをクリアしました。次のフェーズに進んでください
    send: true
  - label: 修正実装
    agent: poor-dev.implement
    prompt: レビュー指摘に基づいて修正を適用してください
---

## ユーザー入力

```text
$ARGUMENTS
```

**使用方法**: `/review-phase <フェーズ名>`

## アウトライン

1. フェーズ成果物の読み込み（コード、テスト、ドキュメント等）
2. Definition of Doneのチェック
3. リグレッションテストの実行
4. 4つのペルソナでレビューを実行
5. 判定と推奨事項を出力

## ペルソナ詳細

### 品質保証エンジニア
**観点**: Definition of Doneの遵守
**確認項目**:
- Definition of Doneが満たされているか？
- 全ての品質ゲートを通過したか？
- テストが全てパスしたか？
- コードレビューが完了したか？

### リグレッションスペシャリスト
**観点**: 既存機能への影響
**確認項目**:
- 既存機能が正常に動作しているか？
- リグレッションがないか？
- 統合テストがパスしたか？
- エンドツーエンドテストがパスしたか？

### ドキュメンテーションエンジニア
**観点**: ドキュメントの完全性
**確認項目**:
- コードコメントが適切か？
- APIドキュメントがあるか？
- ユーザードキュメントがあるか？
- READMEが更新されたか？
- CHANGELOGが更新されたか？

### UXデザイナー
**観点**: ユーザー体験の評価
**確認項目**:
- ユーザー体験が良いか？
- ユーザーインタフェースが直感的か？
- アクセシビリティが考慮されているか？
- ユーザーフィードバックがあるか？

## Definition of Doneチェック

### 必須項目

- [ ] 全てのタスクが完了している
- [ ] 全ての品質ゲートを通過した
- [ ] 単体テストがパスした
- [ ] 統合テストがパスした
- [ ] エンドツーエンドテストがパスした
- [ ] コードレビューが完了した
- [ ] 敵対的レビューに合格した
- [ ] ドキュメントが更新された
- [ ] リグレッションがない
- [ ] セキュリティレビューが完了した

### オプション項目

- [ ] パフォーマンステストがパスした
- [ ] アクセシビリティテストがパスした
- [ ] ユーザーテストが完了した
- [ ] デプロイ準備が完了した

### DoDの結果

| 項目 | 必須 | 結果 | 備考 |
|------|------|------|------|
| タスク完了 | ✓ | [✓/✗] | [説明] |
| 品質ゲート | ✓ | [✓/✗] | [説明] |
| 単体テスト | ✓ | [✓/✗] | [説明] |
| 統合テスト | ✓ | [✓/✗] | [説明] |
| E2Eテスト | ✓ | [✓/✗] | [説明] |
| コードレビュー | ✓ | [✓/✗] | [説明] |
| 敵対的レビュー | ✓ | [✓/✗] | [説明] |
| ドキュメント | ✓ | [✓/✗] | [説明] |
| リグレッション | ✓ | [✓/✗] | [説明] |
| セキュリティ | ✓ | [✓/✗] | [説明] |

## リグレッションテスト

### 実行コマンド

```bash
# 全てのテストを実行
npm test  # または pytest, cargo test 等

# カバレッジを確認
npm test -- --coverage

# 特定のテストスイート
npm test -- --testNamePattern="既存機能"
```

### リグレッションチェック

- [ ] 既存機能のテストがパスした
- [ ] 既存のAPIが正常に動作している
- [ ] 既存のUIが正常に表示されている
- [ ] 既存のデータが正常に処理されている

### リグレッションの結果

| テストスイート | 実行 | パス | 失敗 | スキップ | カバレッジ |
|---------------|------|------|------|---------|---------|
| 既存機能      | N    | N    | 0    | 0       | 85%      |
| 新規機能      | N    | N    | 0    | 0       | 90%      |
| 統合テスト    | N    | N    | 0    | 0       | 80%      |
| E2Eテスト     | N    | N    | 0    | 0       | 75%      |

## ドキュメントチェック

### 必須ドキュメント

- [ ] コードコメント
- [ ] APIドキュメント（該当の場合）
- [ ] ユーザードキュメント（該当の場合）
- [ ] READMEの更新
- [ ] CHANGELOGの更新

### ドキュメントの品質

| ドキュメント | 更新 | 品質 | 完全性 | 備考 |
|-------------|------|------|--------|------|
| README      | [✓/✗] | [1-5] | [1-5] | [説明] |
| CHANGELOG   | [✓/✗] | [1-5] | [1-5] | [説明] |
| API Docs    | [✓/✗] | [1-5] | [1-5] | [説明] |
| Code Comms  | [✓/✗] | [1-5] | [1-5] | [説明] |

## UX評価

### UXの品質

| 項目 | 評価 | 説明 |
|------|------|------|
| ユーザー体験 | [1-5] | 1: 低い、5: 高い |
| ユーザーインタフェース | [1-5] | 1: 低い、5: 高い |
| アクセシビリティ | [✓/✗/?] | 考慮されているか？ |
| ユーザーフィードバック | [✓/✗/?] | あるか？ |

## 出力形式

```markdown
# フェーズ完了レビュー結果

**フェーズ**: [フェーズ名]
**レビュー日時**: [日時]

## 判定: GO / CONDITIONAL / NO-GO

[判定の理由]

## Critical Issues

[重大な問題のリスト]

## High Priority Issues

[高優先度問題のリスト]

## Medium Priority Issues

[中優先度問題のリスト]

## Definition of Doneチェック

### 必須項目

| 項目 | 結果 | 備考 |
|------|------|------|
| タスク完了 | [✓/✗] | [説明] |
| 品質ゲート | [✓/✗] | [説明] |
| 単体テスト | [✓/✗] | [説明] |
| 統合テスト | [✓/✗] | [説明] |
| E2Eテスト | [✓/✗] | [説明] |
| コードレビュー | [✓/✗] | [説明] |
| 敵対的レビュー | [✓/✗] | [説明] |
| ドキュメント | [✓/✗] | [説明] |
| リグレッション | [✓/✗] | [説明] |
| セキュリティ | [✓/✗] | [説明] |

### オプション項目

| 項目 | 結果 | 備考 |
|------|------|------|
| パフォーマンステスト | [✓/✗] | [説明] |
| アクセシビリティテスト | [✓/✗] | [説明] |
| ユーザーテスト | [✓/✗] | [説明] |
| デプロイ準備 | [✓/✗] | [説明] |

### DoDの結果
- 必須項目: [完了数/総数]
- オプション項目: [完了数/総数]
- 合格: [はい/いいえ]

## リグレッションテスト

### 実行結果
[実行結果の詳細]

### リグレッションチェック
- [ ] 既存機能のテストがパスした
- [ ] 既存のAPIが正常に動作している
- [ ] 既存のUIが正常に表示されている
- [ ] 既存のデータが正常に処理されている

### リグレッションの結果
- リグレッション: [あり/なし]
- 失敗したテスト: [数]

## ドキュメントチェック

### 必須ドキュメント
- [ ] コードコメント
- [ ] APIドキュメント
- [ ] ユーザードキュメント
- [ ] READMEの更新
- [ ] CHANGELOGの更新

### ドキュメントの品質
[ドキュメントの品質の詳細]

## UX評価
[UX評価の詳細]

## ペルソナ別フィードバック

### 品質保証エンジニア
[品質保証エンジニアのフィードバック]

### リグレッションスペシャリスト
[リグレッションスペシャリストのフィードバック]

### ドキュメンテーションエンジニア
[ドキュメンテーションエンジニアのフィードバック]

### UXデザイナー
[UXデザイナーのフィードバック]

## 推奨事項

### 優先度Critical
[推奨事項のリスト]

### 優先度High
[推奨事項のリスト]

### 優先度Medium
[推奨事項のリスト]
```

## 品質基準

- **GO**: Critical/High問題なし、DoD全必須項目完了、リグレッションなし
- **CONDITIONAL**: 軽微な問題あり、修正後に進めてよい
- **NO-GO**: 重大な問題あり、DoD未完了、またはリグレッションあり

## 次のステップ

- **GO**: 次のフェーズに進む、またはデプロイ
- **CONDITIONAL**: 問題を修正し、再レビュー
- **NO-GO**: 問題を修正し、再レビュー

## デプロイ準備チェック

GO判定後、デプロイ準備を確認:

- [ ] 全ての品質ゲートを通過
- [ ] リグレッションなし
- [ ] ドキュメント更新完了
- [ ] CHANGELOG更新完了
- [ ] バージョン番号更新
- [ ] リリースノート作成
- [ ] デプロイスクリプト準備完了
- [ ] ロールバック計画あり

デプロイ準備が完了したら、デプロイを実行できます。
