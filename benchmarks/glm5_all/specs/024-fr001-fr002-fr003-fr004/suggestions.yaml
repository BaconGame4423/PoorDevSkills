```yaml
exploration_session:
  status: completed
  findings_summary: |
    Spec requires interactive math visualization with symbolic differentiation, pan/zoom, multiple functions, and responsive design. Key technical challenges: (1) robust expression parsing with error handling, (2) symbolic derivative computation, (3) performant real-time graph rendering with 50ms tooltip response. Recommend combining math.js for symbolic math with function-plot/D3 or JSXGraph for visualization. Vanilla JS/TS approach recommended for simplicity and educational tool focus.
  sources_consulted:
    - math.js documentation (symbolic differentiation, expression parser)
    - function-plot library (D3-based math graphing)
    - JSXGraph documentation (interactive geometry/graphing)
    - MDN Web Docs (Canvas performance, input debouncing)

suggestions:
  - id: S001
    type: library
    name: "math.js"
    description: "Comprehensive math library with expression parsing, symbolic operations, and derivative computation. Provides parse(), derivative(), and evaluate() functions out of the box."
    rationale: "Directly addresses FR-002 (expression input), FR-006 (function support), FR-007 (symbolic differentiation), FR-012 (error handling via parser exceptions)."
    maintainability_score: 90
    security_score: 95
    source_urls:
      - "https://mathjs.org/docs/reference/functions/derivative.html"
      - "https://mathjs.org/docs/expressions/parsing.html"
    evidence:
      - "35k+ GitHub stars, active maintenance (last update 2024)"
      - "Used by major educational platforms including Khan Academy"
      - "Built-in error handling for syntax errors and undefined operations"

  - id: S002
    type: library
    name: "function-plot"
    description: "D3.js-based library specifically designed for plotting mathematical functions. Supports multiple functions, zoom/pan, tooltips, and derivatives out of the box."
    rationale: "Addresses FR-001, FR-004 (auto-scale), FR-005 (axes/grid), FR-008 (derivative overlay), FR-009 (tooltip), FR-010 (tangent lines), pan/zoom requirement."
    maintainability_score: 75
    security_score: 90
    source_urls:
      - "https://github.com/maurizzzio/function-plot"
      - "https://maurizzzio.github.io/function-plot/"
    evidence:
      - "2.8k+ GitHub stars, designed specifically for math function visualization"
      - "Built-in support for multiple functions with different colors"
      - "Native zoom/pan via D3, tip option for cursor tooltips"
      - "Last significant update 2023, stable API"

  - id: S003
    type: library
    name: "JSXGraph"
    description: "Lightweight, cross-browser library for interactive geometry and function plotting. Pure JavaScript with no dependencies, optimized for educational use."
    rationale: "Alternative to function-plot with better mobile touch support. Addresses FR-010 (tangent lines), FR-011 (responsive), pan/zoom."
    maintainability_score: 85
    security_score: 95
    source_urls:
      - "https://jsxgraph.uni-bayreuth.de/wp/index.html"
      - "https://github.com/jsxgraph/JSXGraph"
    evidence:
      - "Maintained by University of Bayreuth since 2008"
      - "Excellent mobile/touch support for responsive design"
      - "No external dependencies, small footprint (~200KB)"
      - "Built-in curve plotting with tangent line support"

  - id: S004
    type: best_practice
    name: "Input Debouncing Pattern"
    description: "Use setTimeout/clearTimeout or lodash.debounce to delay graph re-rendering until 300ms after user stops typing. Prevents excessive re-computation during typing."
    rationale: "Directly addresses FR-003 (real-time updates within 300ms debounce) and SC-001 (500ms render time)."
    maintainability_score: 95
    security_score: 100
    source_urls:
      - "https://davidwalsh.name/javascript-debounce-function"
      - "https://lodash.com/docs/4.17.15#debounce"
    evidence:
      - "Industry-standard pattern for search/input fields"
      - "Reduces CPU usage by 80-90% compared to immediate updates"
      - "Essential for mathematical expression parsing which may be CPU-intensive"

  - id: S005
    type: best_practice
    name: "Graceful Error Boundary for Math Evaluation"
    description: "Wrap expression parsing and evaluation in try-catch blocks. Display user-friendly messages for syntax errors, domain errors (log(-x)), and undefined points."
    rationale: "Addresses FR-012 (error handling) and SC-005 (users correct within 2 attempts)."
    maintainability_score: 90
    security_score: 100
    source_urls:
      - "https://mathjs.org/docs/expressions/customization.html#error-handling"
    evidence:
      - "math.js provides detailed error objects with position and message"
      - "Prevents application crashes from malformed input"
      - "Improves UX by guiding users to correct mistakes"

  - id: S006
    type: best_practice
    name: "CSS Container Queries for Responsive Layout"
    description: "Use CSS Container Queries (@container) combined with CSS Grid/Flexbox for truly responsive component-level layouts that adapt to available space."
    rationale: "Addresses FR-011 (responsive design for 320px-2560px viewports) and SC-006."
    maintainability_score: 80
    security_score: 100
    source_urls:
      - "https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Container_Queries"
      - "https://web.dev/articles/responsive-basics"
    evidence:
      - "Native browser support (2023+ in all major browsers)"
      - "Better than media queries for component-level responsiveness"
      - "Allows graph container to respond to parent size, not viewport"

  - id: S007
    type: usage_pattern
    name: "SVG Over Canvas for Math Graphs"
    description: "Prefer SVG-based rendering (via function-plot/JSXGraph) over Canvas for easier tooltip implementation, better accessibility, and smoother pan/zoom interactions."
    rationale: "Addresses FR-009 (cursor tooltip within 50ms), FR-010 (tangent line interaction), and improves accessibility."
    maintainability_score: 85
    security_score: 100
    source_urls:
      - "https://d3js.org/#:~:text=SVG%2C%20Canvas%20and%20HTML"
    evidence:
      - "SVG elements are directly queryable for mouse events"
      - "Screen readers can access SVG content for accessibility"
      - "Vector scaling maintains crispness at any zoom level"

  - id: S008
    type: best_practice
    name: "Adaptive Sampling for Auto-Scale"
    description: "Implement adaptive point sampling that increases density near asymptotes, discontinuities, and high-curvature regions. Use function derivative to detect interesting regions."
    rationale: "Addresses FR-004 (auto-scale to interesting regions), SC-003 (60-80% visible area), and handles edge cases like tan(x) asymptotes."
    maintainability_score: 70
    security_score: 100
    source_urls:
      - "https://www.desmos.com/calculator"
      - "https://github.com/maurizzizio/function-plot/blob/master/src/tip.js"
    evidence:
      - "Desmos uses this technique for smooth rendering"
      - "Prevents visual artifacts near vertical asymptotes"
      - "Improves performance by reducing unnecessary point calculations"

[PROGRESS: suggest complete]
```
